<!doctype html>
<html lang = "en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=1.0, user-scalable=no" charset = "utf-8">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="../css/root.css">
        <link rel="stylesheet" href="../css/form-noaside.css">    <script>
            var check = false
            //필수 내용 확인 함수
            function checkInput(myform) {
                if(check == false){
                    alert("아이디 중복체크를 해주세요.");
                    myform.id_check.focus();
                    return false;
                }
                if(myform.id_name.value.length <= 0){
                    alert("이름을 입력하세요.");
                    myform.id_name.focus();
                    return false;
                }
                if(myform.id_id.value.length <= 0){
                    alert("아이디를 입력하세요.");
                    myform.id_id.focus();
                    return false;
                }
                if(myform.id_pw.value.length <= 0){
                    alert("비밀번호를 입력하세요.");
                    myform.id_pw.focus();
                    return false;
                }
                if(myform.id_pw_check.value.length <= 0){
                    alert("비밀번호 확인을 입력하세요.");
                    myform.id_pw_check.focus();
                    return false;
                }
                if(myform.id_pw.value != myform.id_pw_check.value){
                    alert("비밀번호와 비밀번화 확인과 다릅니다.");
                    myform.id_pw.focus();
                    return false;
                }
                if(myform.id_zip.value.length <= 0){
                    alert("주소를 입력하세요.");
                    myform.id_zip.focus();
                    return false;
                }
                document.querySelector("#id_id").readOnly = true;
                return true;
            }
    
            //아이디 중복 확인 함수
            function checkid() {
                check = false;
                var userid = document.querySelector("#id_id").value;
    
                if(userid)
                {
                    url = "/member/idCheck?userid="+userid;
                    window.open(url,"chkid","width=310,height=445");
                } else {
                    alert("아이디를 입력하세요.");
                }
            }
    
            //아이디 중복 초기화
            function checkReset() {
                check = false;
                document.querySelector("#id_id").readOnly = false;
            }
    
            //아이디 중복 활성화
            function decide() {
                check = true;
                document.querySelector("#id_id").readOnly = true;
                document.querySelector("#id_check").value = "아이디 변경"
                document.querySelector("#id_check").setAttribute("onclick", "change()");
            }
    
            //아이디 중복 비활성화
            function change() {
                check = false;
                document.querySelector("#id_id").readOnly = false;
                document.querySelector("#id_check").value = "아이디 중복"
                document.querySelector("#id_check").setAttribute("onclick", "checkid()")
            }
        </script>
        <title>회원가입</title>
    </head>
        <body>
        <header>
                        <a href="/">
                <img src="../img/header.gif" alt="">
            </a>
            <div class="link">
            <a href="/member/login">로그인</a><a href="/member/addupdate">회원가입</a>            </div>
        </header>
        <nav class="navbar navbar-expand-lg bg-body-tertiary"><div class="container-fluid"><a class="navbar-brand"></a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNavDropdown"><ul class="navbar-nav"><li class="nav-item"><a class="nav-link active" aria-current="page" href="/">홈</a></li><li class="nav-item"><a class="nav-link" href="/not/list">공지사항</a></li><li class="nav-item"><a class="nav-link" href="/lib/list">도서관</a></li><li class="nav-item"><a class="nav-link" href="/mat/list">자료 검색</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">내서재</a><ul class="dropdown-menu"><li><a class='dropdown-item' href='/member/logalert'>대출중도서</a></li><li><a class='dropdown-item' href='/member/logalert'>모든대출내역</a></li><li><a class='dropdown-item' href='/member/logalert'>예약내역</a></li><li><a class='dropdown-item' href='/member/logalert'>상호대차내역</a></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">마이페이지</a><ul class="dropdown-menu"><li><a class='dropdown-item' href='/member/logalert'>회원정보수정</a></li><li><a class='dropdown-item' href='/member/logalert'>회원탈퇴</a></li></ul></li></ul></div></div></nav>        
        <main>
            <form action="/member/addupdate" method="post" onSubmit="return checkInput(this)" onReset="return checkReset()">
                <fieldset id = form_fieldset>
                <h2>회원가입</h2>
                    <div class="text">
                        <ul>
                            <li><input class="input" type= "text" name="mem_name" id="id_name" value="" placeholder="이름"></li>
                            <li><input class="input" type= "text" name="mem_id" id="id_id" value="" placeholder="아이디">
                                <input type = "button" name="id_check" id="id_check" value="아이디 중복" onclick="checkid();"></li>
                            <li><input class="input" type= "password" name="mem_pw" id="id_pw" value="" placeholder="비밀번호"></li>
                            <li><input class="input" type= "password" name="mem_pw_check" id="id_pw_check" value="" placeholder="비밀번호 확인"></li>
                            <li><label for  = "id_detail">주소</label></li>
                            <li><input class="input" type= "text" name="mem_zip" id="id_zip" value="" placeholder="우편번호" readonly>
                                    <input type = "button" onclick="daumPostcode()" value="우편번호 찾기"></li>
                            <li><input class="input" type= "text" name="mem_add" id="id_add" value="" placeholder="주소" readonly></li>
                            <li><input class="input" type= "text" name="mem_detail" id="id_detail" value="" placeholder="상세주소"></li>
                            <input type="hidden" name="mem_no" value="">
                            <div class="form_class">
                                <input type= "submit" value="등록">
                                <input type= "reset" value='지우기'>
                            </div> 
                        </ul>
                    </div>
                </fieldset>
            </form>
        </main>
        <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
            <script>
                //아이디 체크확인
                if(check){
                    decide();
                }
                else{
                    change();
                }
        
                function daumPostcode() {
                    new daum.Postcode({
                        oncomplete: function(data) {
                            // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.
        
                            // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                            // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                            var addr = ''; // 주소 변수
                            var extraAddr = ''; // 참고항목 변수
        
                            //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                            if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                                addr = data.roadAddress;
                            } else { // 사용자가 지번 주소를 선택했을 경우(J)
                                addr = data.jibunAddress;
                            }
        
                            // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                            if(data.userSelectedType === 'R'){
                                // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                                // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                                if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                                    extraAddr += data.bname;
                                }
                                // 건물명이 있고, 공동주택일 경우 추가한다.
                                if(data.buildingName !== '' && data.apartment === 'Y'){
                                    extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                                }
                                // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                                if(extraAddr !== ''){
                                    extraAddr = ' (' + extraAddr + ')';
                                }
                                // 조합된 참고항목을 해당 필드에 넣는다.
                                document.querySelector("#id_detail").value = extraAddr;
                            
                            } else {
                                document.querySelector("#id_detail").value = '';
                            }
        
                            // 우편번호와 주소 정보를 해당 필드에 넣는다.
                            document.querySelector("#id_zip").value = data.zonecode;
                            document.querySelector("#id_add").value = addr;
                            // 커서를 상세주소 필드로 이동한다.
                            document.querySelector("#id_detail").focus();
                        }
                    }).open();
                }
            </script>
            <footer>
                <img src="../img/footer.gif" alt="">
                <div class='table_menu'><table><tr><th>공지사항</th> <th>도서관</th> <th>자료 검색</th> <th>내서재</th> <th>마이페이지</th></tr><tr><td><a href="/not/list">공지사항</a></td><td><a href="/lib/list">도서관</a></td><td><a href="/mat/list">자료검색</a></td><td><a href="/member/logalert">대출중도서</a></td><td><a href="/member/logalert">회원정보수정</a></td></tr><tr><td></td><td></td><td><a href="/member/logalert">모든대출내역</a></td><td><a href="/member/logalert">회원탈퇴</a></td></tr><tr><td></td><td></td><td><a href="/member/logalert">예약내역</a></td><td></td></tr><tr><td></td><td></td><td><a href="/member/logalert">상호대차내역</a></td><td></td></tr></table></div>        </footer>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        </body>                    
</html>