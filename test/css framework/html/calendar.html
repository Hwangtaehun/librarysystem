<!DOCTYPE html>
<html lang = "en">
    <head>
        <link rel="stylesheet" href="../css/form-home.css">      
    </head>
    <body>
        <div class="calender">
          <div class="header">
            <button class="prevBtn" onclick="prevCal()"></button>
            <div class="title">
              <div class="yearTitle"></div>
              <div>년 </div>
              <div class="monthTitle"></div>
              <div>월</div>
            </div>
            <button class="nextBtn" onclick="nextCal()"></button>
          </div>
          <div class="main">
            <div class="daies">
              <div class="day">Sun</div>
              <div class="day">Mon</div>
              <div class="day">Tue</div>
              <div class="day">Wed</div>
              <div class="day">Thu</div>
              <div class="day">Fri</div>
              <div class="day">Sat</div>
            </div>
            <div class="dates"></div>
          </div>
        </div>
        <script>
            let CDate = new Date();
            let today = new Date();

            buildCalender();

            function buildCalender(){
                let size_pre = 0;
                let size_next = 0;
                let prevLast = new Date(CDate.getFullYear(), CDate.getMonth(), 0);
                let thisFirst = new Date(CDate.getFullYear(), CDate.getMonth(), 1);
                let thisLast = new Date(CDate.getFullYear(), CDate.getMonth() + 1, 0);
                document.querySelector(".yearTitle").innerHTML = CDate.getFullYear();
                document.querySelector(".monthTitle").innerHTML = CDate.getMonth() + 1;
                let dates = [];

                if(thisFirst.getDay()!=0){
                    size_pre = thisFirst.getDay();
                    for(let i = 0; i < thisFirst.getDay(); i++){
                        dates.unshift(prevLast.getDate()-i);
                    }
                }

                for(let i = 1; i <= thisLast.getDate(); i++){
                    dates.push(i);
                }

                for(let i = 1; i <= 13 - thisLast.getDay(); i++){
                    dates.push(i);
                }

                for(let i = 0; i < 42; i++){
                    if(dates[i-1] > dates[i]){
                        size_next = i;
                    }
                }

                let htmlDates = '';
                for(let i = 0; i < 42; i++){
                    if(today.getDate()==dates[i] && today.getMonth()==CDate.getMonth() && today.getFullYear()==CDate.getFullYear()){
                        htmlDates += `<div class="date today">${dates[i]}</div>`;
                    }
                    else if(i < size_pre || size_next <= i){
                        htmlDates += `<div class="date cloud">${dates[i]}</div>`;
                    }
                    else{
                        htmlDates += `<div class="date">${dates[i]}</div>`;
                    }
                }
                
                document.querySelector(".dates").innerHTML = htmlDates;
            }

            function prevCal(){
                CDate.setMonth(CDate.getMonth()-1);
                buildCalender();
            }

            function nextCal(){
                CDate.setMonth(CDate.getMonth()+1);
                buildCalender();
            }
        </script>
      </body>
</html>