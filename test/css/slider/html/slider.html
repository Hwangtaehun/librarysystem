<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../css/loop.css">
        <title>슬라이드 배너</title>
    </head>
    <body>
        <div class="slide slide_wrap">
            <div class="slide_item item1">1</div>
            <div class="slide_item item2">2</div>
            <div class="slide_item item3">3</div>
            <div class="slide_item item4">4</div>
            <div class="slide_item item5">5</div>
            <div class="slide_prev_button slide_button">◀</div>
            <div class="slide_next_button slide_button">▶</div>
            <ul class="slide_pagination"></ul>
        </div>
        <script>
            const slide = document.querySelector(".slide");
            const prevBtn = document.querySelector(".slide_prev_button");
            const nextBtn = document.querySelector(".slide_next_button");
            const maxSlide = slideItems.length;
            const pagination = document.querySelector(".slide_pagination");
            const paginationItems = document.querySelectorAll(".slide_pagination > li")
            const startSlide = slideItems[0];
            const endSlide = slideItems[slideItems.length - 1];
            const startElem = document.createElement("div");
            const endElem = document.createElement("div");

            let slideWidth = slide.clientWidth;
            let slideItems = document.querySelectorAll(".slide_item");
            let currSlide = 1;
            let offset = slideWidth + currSlide;

            for (let i = 0; i < maxSlide; i++) {
                if(i === 0){
                    pagination.innerHTML += '<li class="active">•</li>';
                }
                else{
                    pagination.innerHTML += '<li>•</li>';
                }
            }

            endSlide.classList.forEach((c) => endElem.classList.add(c));
            endElem.innerHTML = endSlide.innerHTML;

            startSlide.classList.forEach((c) => startElem.classList.add(c));
            startElem.innerHTML = startSlide.innerHTML;

            slideItems[0].before(endElem);
            slideItems[slideItems.length - 1].after(startElem);
            
            slideItems = document.querySelectorAll(".slide_itme");
            slideItems.forEach((i) => {
                i.setAttribute("style", 'left: ${-offset}px');
            });
        </script>
    </body>
</html>